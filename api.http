### Variáveis de Ambiente
### Configure estas variáveis antes de usar as requisições
### Para obter o sessionToken: faça login no navegador, abra DevTools > Application > Cookies > copie o valor de "next-auth.session-token"

### DESENVOLVIMENTO LOCAL
@baseUrl = http://localhost:3000
# @baseUrl = https://projeto-igreja-git-main-leandroarrudas-projects.vercel.app

### PRODUÇÃO (Vercel)
### Como descobrir a URL de produção:
### 1. Acesse https://vercel.com/dashboard
### 2. Clique no seu projeto
### 3. A URL de produção aparece no topo da página (ex: https://seu-projeto.vercel.app)
### 4. Ou vá em Settings > Environment Variables e veja o valor de NEXTAUTH_URL
### 5. Ou use o comando: vercel ls (se tiver Vercel CLI instalado)
@sessionToken = eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0.._ikWX_2Kr3TNc0_8.IElerQwcXLG1E1nkw9qsTkA4xiH6XG8kPp23FMXeAfG7Tmr9bv0w0CLkqiNyFqjdnfHTYQcVFDp9-JypWngfWRMDnSuJ-ZXrKGuTB4l5CI-PIdYsjeOZxiJAdVIGFiGAMmTr7zhmxessgcaqBV7mV7UMXn2wR41rcW2zw4WKFQRTb9yyN1VWYdvgtcL1WH2-vZe-ODNjEngQkKUq9XbFpsSXc7iZ7OWBDlF3Ir0.Kt5wDTZxdz1sclLKNgHejw
@quizId = 2
@userId = 1

### ============================================
### AUTENTICAÇÃO
### ============================================

### Criar novo usuário (não requer autenticação)
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "name": "João Silva",
  "email": "joao@example.com",
  "password": "senha123"
}

### ============================================
### QUIZ - CRUD
### ============================================

### Criar novo quiz (requer ADMIN)
POST {{baseUrl}}/api/quiz
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "tema": "História do Brasil"
}

### Listar todos os quizzes (requer ADMIN)
GET {{baseUrl}}/api/quiz
Cookie: next-auth.session-token={{sessionToken}}

### Atualizar quiz (requer ADMIN)
### Pode atualizar tema e/ou status ativo
### Se ativar um quiz, todos os outros serão desativados automaticamente
PUT {{baseUrl}}/api/quiz/{{quizId}}
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "tema": "História do Brasil - Atualizado",
  "ativo": true
}

### Deletar quiz (requer ADMIN)
DELETE {{baseUrl}}/api/quiz/{{quizId}}
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### QUIZ ATIVO
### ============================================

### Buscar quiz ativo (requer autenticação)
### Retorna o quiz ativo, se o usuário já respondeu e o resultado (se já respondeu tudo)
GET {{baseUrl}}/api/quiz/ativo
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### PERGUNTAS
### ============================================

### Criar uma única pergunta (requer ADMIN)
POST {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "enunciado": "Qual é a capital do Brasil?",
  "alternativaA": "São Paulo",
  "alternativaB": "Rio de Janeiro",
  "alternativaC": "Brasília",
  "alternativaD": "Belo Horizonte",
  "alternativaE": "Salvador",
  "respostaCorreta": "C",
  "tempoSegundos": 30
}

### Criar múltiplas perguntas de uma vez (requer ADMIN)
### Envie um array de perguntas - todas serão criadas em uma transação
### Se qualquer pergunta for inválida, nenhuma será criada (rollback)
POST {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

[
  {
    "enunciado": "De acordo com a lição de Sábado, em que Paulo baseia a necessidade de unidade entre os crentes?",
    "alternativaA": "Nas tradições dos anciãos da igreja",
    "alternativaB": "Nas regras estabelecidas pelos líderes de Filipos",
    "alternativaC": "No ensino e no exemplo de Jesus",
    "alternativaD": "Na sabedoria dos filósofos gregos",
    "alternativaE": "Nas leis civis do Império Romano",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Conforme o texto de Sábado, qual foi a origem da desunião no universo?",
    "alternativaA": "A queda do homem no jardim do Éden",
    "alternativaB": "O orgulho e a sede de posição e poder de um único anjo no céu",
    "alternativaC": "A confusão das línguas na Torre de Babel",
    "alternativaD": "O conflito entre os discípulos de Jesus",
    "alternativaE": "A falta de conhecimento das Escrituras",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "No estudo de Domingo, qual termo grego é utilizado para descrever a 'ambição egoísta' ou rivalidade?",
    "alternativaA": "Koinonia",
    "alternativaB": "Eritheia",
    "alternativaC": "Kenodoxia",
    "alternativaD": "Morphe",
    "alternativaE": "Apologia",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Segundo o texto de Domingo, qual o sentido da palavra grega 'kenodoxia' (vaidade) na literatura extrabíblica?",
    "alternativaA": "Desejo sincero de servir ao próximo",
    "alternativaB": "Humildade extrema e submissão",
    "alternativaC": "Arrogância, orgulho vazio e percepção inflada de si mesmo",
    "alternativaD": "Preocupação com a aparência física externa",
    "alternativaE": "Tristeza profunda por estar encarcerado",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "De acordo com Jesus (Mateus 15:19), citado na lição de Segunda-feira, de onde procedem os maus pensamentos?",
    "alternativaA": "Das circunstâncias externas difíceis",
    "alternativaB": "Do coração (ou da mente)",
    "alternativaC": "Da influência direta de amigos mundanos",
    "alternativaD": "Da falta de estudo da filosofia",
    "alternativaE": "Apenas da influência dos líderes religiosos",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Na lição de Segunda-feira, como Paulo denomina a unidade mencionada em Efésios 4:3 que cria a 'paz que nos une'?",
    "alternativaA": "Unidade da lei",
    "alternativaB": "Unidade produzida pelo Espírito",
    "alternativaC": "Unidade de costumes",
    "alternativaD": "Unidade financeira da igreja",
    "alternativaE": "Unidade por meio do comportamento externo",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Segundo o estudo de Terça-feira e Romanos 12:2, como o cristão deve ser transformado?",
    "alternativaA": "Pelo cumprimento rigoroso de rituais",
    "alternativaB": "Pela renovação da mente",
    "alternativaC": "Pela mudança de residência geográfica",
    "alternativaD": "Pela prática constante de caridade pública",
    "alternativaE": "Pelo isolamento do mundo",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Qual é o significado literal da palavra hebraica 'aqov' (traduzida como enganoso em Jeremias 17:9), conforme explicado na Terça-feira?",
    "alternativaA": "Uma serpente pronta para o ataque",
    "alternativaB": "Um terreno irregular que nos faz tropeçar",
    "alternativaC": "Uma nuvem que esconde o sol",
    "alternativaD": "Um espelho que reflete imagens distorcidas",
    "alternativaE": "Uma prisão com portas trancadas",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Conforme o texto de Quarta-feira, que forma Jesus tomou sobre Si ao assumir a carne humana (Filipenses 2:7)?",
    "alternativaA": "Forma de um rei glorioso",
    "alternativaB": "Forma de servo (ou escravo)",
    "alternativaC": "Forma de um anjo de luz",
    "alternativaD": "Forma de um mestre da lei",
    "alternativaE": "Forma de um filósofo sábio",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Segundo Hebreus 5:8, mencionado na Quarta-feira, o que Jesus aprendeu por meio das coisas que sofreu?",
    "alternativaA": "Teologia sistemática",
    "alternativaB": "A obediência",
    "alternativaC": "A arte da pregação",
    "alternativaD": "A paciência com os pecadores",
    "alternativaE": "A liderança eclesiástica",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "No estudo de Quinta-feira, o que indica a palavra grega 'morphē' (forma) em relação a Jesus em Filipenses 2:6?",
    "alternativaA": "Sua aparência física externa",
    "alternativaB": "Sua natureza divina e igualdade com o Pai",
    "alternativaC": "Sua condição de ser humano finito",
    "alternativaD": "A túnica usada pelos sacerdotes",
    "alternativaE": "Sua posição como carpinteiro",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Qual expressão Paulo utiliza em 1 Timóteo 3:16 para descrever o mistério de Deus se tornar homem, conforme a Quinta-feira?",
    "alternativaA": "Plano da redenção",
    "alternativaB": "Mistério da piedade",
    "alternativaC": "Caminho da verdade",
    "alternativaD": "Grande conflito universal",
    "alternativaE": "Conselho da paz",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Segundo a citação de Ellen G. White na lição de Sexta-feira, qual será o tema de nosso estudo ao longo da eternidade?",
    "alternativaA": "A história das nações da Terra",
    "alternativaB": "Cristo e Sua obra de redenção",
    "alternativaC": "As leis da física e da natureza",
    "alternativaD": "As biografias dos heróis da fé",
    "alternativaE": "A estrutura do santuário terrestre",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Na lição de Sexta-feira, a que Ellen White compara o amor de Deus em relação a todas as fontes de ternura humana?",
    "alternativaA": "A uma pequena chama diante do sol",
    "alternativaB": "A um pequeno riacho diante do oceano sem limites",
    "alternativaC": "A uma gota de água diante de uma chuva torrencial",
    "alternativaD": "A uma semente diante de uma floresta",
    "alternativaE": "A uma estrela diante de toda a galáxia",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  }
]

### Buscar próxima pergunta não respondida (requer autenticação)
### Retorna uma pergunta aleatória que o usuário ainda não respondeu
GET {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Cookie: next-auth.session-token={{sessionToken}}

### Listar todas as perguntas de um quiz (requer ADMIN)
### Use o query parameter ?admin=true para listar todas as perguntas ordenadas
GET {{baseUrl}}/api/quiz/{{quizId}}/perguntas?admin=true
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### RESPOSTAS E RESULTADOS
### ============================================

### Salvar resposta de uma pergunta (requer autenticação)
### Retorna a próxima pergunta não respondida ou o resultado final se terminou
POST {{baseUrl}}/api/quiz/resposta
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "quizId": "{{quizId}}",
  "perguntaId": "ID_DA_PERGUNTA_AQUI",
  "alternativaEscolhida": "C"
}

### Salvar resposta sem alternativa (tempo esgotado)
### Se o tempo acabar, pode enviar null ou omitir alternativaEscolhida
POST {{baseUrl}}/api/quiz/resposta
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "quizId": "{{quizId}}",
  "perguntaId": "ID_DA_PERGUNTA_AQUI",
  "alternativaEscolhida": null
}

### Obter resultado do quiz (requer autenticação)
### Retorna total de perguntas, acertos, erros e porcentagem
GET {{baseUrl}}/api/quiz/{{quizId}}/resultado
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### EXEMPLOS DE INSERÇÃO EM MASSA
### ============================================

### Exemplo: Criar quiz completo com múltiplas perguntas
### 1. Primeiro, crie o quiz
POST {{baseUrl}}/api/quiz
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "tema": "Geografia do Brasil"
}

### 2. Copie o ID do quiz retornado e substitua {{quizId}} abaixo
### 3. Crie todas as perguntas de uma vez
POST {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

[
  {
    "enunciado": "Qual é o maior estado do Brasil em área?",
    "alternativaA": "Amazonas",
    "alternativaB": "Pará",
    "alternativaC": "Mato Grosso",
    "alternativaD": "Minas Gerais",
    "alternativaE": "Bahia",
    "respostaCorreta": "A",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Qual é a maior cidade do Brasil em população?",
    "alternativaA": "Rio de Janeiro",
    "alternativaB": "São Paulo",
    "alternativaC": "Brasília",
    "alternativaD": "Salvador",
    "alternativaE": "Fortaleza",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Quantos países fazem fronteira com o Brasil?",
    "alternativaA": "8",
    "alternativaB": "9",
    "alternativaC": "10",
    "alternativaD": "11",
    "alternativaE": "12",
    "respostaCorreta": "C",
    "tempoSegundos": 45
  },
  {
    "enunciado": "Qual é o ponto mais alto do Brasil?",
    "alternativaA": "Pico da Neblina",
    "alternativaB": "Pico da Bandeira",
    "alternativaC": "Pedra da Mina",
    "alternativaD": "Pico do Calçado",
    "alternativaE": "Monte Roraima",
    "respostaCorreta": "A",
    "tempoSegundos": 40
  },
  {
    "enunciado": "Qual é o maior rio do Brasil?",
    "alternativaA": "Rio São Francisco",
    "alternativaB": "Rio Paraná",
    "alternativaC": "Rio Amazonas",
    "alternativaD": "Rio Tocantins",
    "alternativaE": "Rio Madeira",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  }
]

### 4. Ative o quiz para que os usuários possam respondê-lo
PUT {{baseUrl}}/api/quiz/{{quizId}}
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "ativo": true
}

### ============================================
### USANDO A API EM PRODUÇÃO
### ============================================
###
### Para usar as requisições em produção, substitua {{baseUrl}} por {{baseUrlProd}}:
###
### Exemplo de requisição em produção:
### GET {{baseUrlProd}}/api/quiz/ativo
### Cookie: next-auth.session-token={{sessionToken}}
###
### IMPORTANTE: Para obter o sessionToken em produção:
### 1. Acesse sua aplicação em produção (ex: https://seu-projeto.vercel.app)
### 2. Faça login no navegador
### 3. Abra DevTools (F12) > Application > Cookies
### 4. Copie o valor de "next-auth.session-token" (ou "__Secure-next-auth.session-token")
### 5. Cole no @sessionToken acima

### ============================================
### NOTAS IMPORTANTES
### ============================================
###
### 1. AUTENTICAÇÃO:
###    - A maioria das rotas requer autenticação via cookie de sessão
###    - Para obter o token: faça login no navegador, abra DevTools > Application > Cookies
###    - Copie o valor de "next-auth.session-token" (ou "__Secure-next-auth.session-token" em HTTPS)
###    - Cole no header Cookie: next-auth.session-token=SEU_TOKEN
###
### 2. PERMISSÕES:
###    - Rotas de criação/edição/deleção de quiz: requerem role ADMIN
###    - Rotas de criação de perguntas: requerem role ADMIN
###    - Rotas de resposta: qualquer usuário autenticado
###
### 3. VALIDAÇÕES:
###    - Enunciado: obrigatório, não pode ser vazio
###    - Alternativas: todas as 5 (A, B, C, D, E) são obrigatórias
###    - Resposta correta: deve ser "A", "B", "C", "D" ou "E"
###    - Tempo em segundos: deve ser maior que 0
###
### 4. TRANSACTION:
###    - Ao criar múltiplas perguntas, todas são criadas em uma transação
###    - Se qualquer pergunta for inválida, nenhuma será criada (rollback completo)
###
### 5. QUIZ ATIVO:
###    - Apenas um quiz pode estar ativo por vez
###    - Ao ativar um quiz, todos os outros são desativados automaticamente
###
### 6. RESPOSTAS:
###    - Cada usuário só pode responder cada pergunta uma vez
###    - Se o tempo acabar, pode enviar alternativaEscolhida como null
###    - Após responder, retorna próxima pergunta ou resultado final

