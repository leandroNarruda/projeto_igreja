### Variáveis de Ambiente
### Configure estas variáveis antes de usar as requisições
### Para obter o sessionToken: faça login no navegador, abra DevTools > Application > Cookies > copie o valor de "next-auth.session-token"

### DESENVOLVIMENTO LOCAL
@baseUrl = http://localhost:3001
# @baseUrl = https://projeto-igreja-git-main-leandroarrudas-projects.vercel.app

### PRODUÇÃO (Vercel)
### Como descobrir a URL de produção:
### 1. Acesse https://vercel.com/dashboard
### 2. Clique no seu projeto
### 3. A URL de produção aparece no topo da página (ex: https://seu-projeto.vercel.app)
### 4. Ou vá em Settings > Environment Variables e veja o valor de NEXTAUTH_URL
### 5. Ou use o comando: vercel ls (se tiver Vercel CLI instalado)
@sessionToken = eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0.._ikWX_2Kr3TNc0_8.IElerQwcXLG1E1nkw9qsTkA4xiH6XG8kPp23FMXeAfG7Tmr9bv0w0CLkqiNyFqjdnfHTYQcVFDp9-JypWngfWRMDnSuJ-ZXrKGuTB4l5CI-PIdYsjeOZxiJAdVIGFiGAMmTr7zhmxessgcaqBV7mV7UMXn2wR41rcW2zw4WKFQRTb9yyN1VWYdvgtcL1WH2-vZe-ODNjEngQkKUq9XbFpsSXc7iZ7OWBDlF3Ir0.Kt5wDTZxdz1sclLKNgHejw
@quizId = 3
@userId = 1

### ============================================
### AUTENTICAÇÃO
### ============================================

### Criar novo usuário (não requer autenticação)
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "name": "João Silva",
  "email": "joao@example.com",
  "password": "senha123"
}

### ============================================
### QUIZ - CRUD
### ============================================

### Criar novo quiz (requer ADMIN)
POST {{baseUrl}}/api/quiz
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "tema": "História do Brasil"
}

### Listar todos os quizzes (requer ADMIN)
GET {{baseUrl}}/api/quiz
Cookie: next-auth.session-token={{sessionToken}}

### Atualizar quiz (requer ADMIN)
### Pode atualizar tema e/ou status ativo
### Se ativar um quiz, todos os outros serão desativados automaticamente
PUT {{baseUrl}}/api/quiz/{{quizId}}
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "tema": "História do Brasil - Atualizado",
  "ativo": true
}

### Deletar quiz (requer ADMIN)
DELETE {{baseUrl}}/api/quiz/{{quizId}}
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### QUIZ ATIVO
### ============================================

### Buscar quiz ativo (requer autenticação)
### Retorna o quiz ativo, se o usuário já respondeu e o resultado (se já respondeu tudo)
GET {{baseUrl}}/api/quiz/ativo
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### PERGUNTAS
### ============================================

### Criar uma única pergunta (requer ADMIN)
POST {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "enunciado": "Qual é a capital do Brasil?",
  "alternativaA": "São Paulo",
  "alternativaB": "Rio de Janeiro",
  "alternativaC": "Brasília",
  "alternativaD": "Belo Horizonte",
  "alternativaE": "Salvador",
  "respostaCorreta": "C",
  "tempoSegundos": 30
}

### Criar múltiplas perguntas de uma vez (requer ADMIN)
### Envie um array de perguntas - todas serão criadas em uma transação
### Se qualquer pergunta for inválida, nenhuma será criada (rollback)
POST {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

[
  {
    "enunciado": "De acordo com o texto de Sábado, como é possível sermos a 'luz do mundo'?",
    "alternativaA": "Através de boas obras independentes",
    "alternativaB": "Somente através de uma conexão íntima com Jesus",
    "alternativaC": "Através do estudo acadêmico da Bíblia",
    "alternativaD": "Seguindo os estatutos de Deuteronômio fielmente",
    "alternativaE": "Através de visões e sonhos proféticos",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Qual livro bíblico é citado no Sábado para afirmar que a obediência aos estatutos de Deus é a sabedoria e entendimento do povo aos olhos das outras nações?",
    "alternativaA": "Deuteronômio",
    "alternativaB": "Êxodo",
    "alternativaC": "Salmos",
    "alternativaD": "Provérbios",
    "alternativaE": "Isaías",
    "respostaCorreta": "A",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Na lição de Domingo, o que Paulo quer dizer com a expressão 'com temor e tremor' em Filipenses 2:12?",
    "alternativaA": "Medo constante do julgamento final",
    "alternativaB": "Receio de falhar nos esforços humanos",
    "alternativaC": "Sentir a presença de Deus e a necessidade de obedecê-Lo",
    "alternativaD": "Ansiedade em relação à perseguição romana",
    "alternativaE": "Pavor físico diante da majestade divina",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Segundo o estudo de Domingo, qual é a origem da fé na vida do crente?",
    "alternativaA": "É um mérito alcançado pelo estudo",
    "alternativaB": "É uma decisão puramente humana e racional",
    "alternativaC": "É um dom encorajado pela ação do Espírito Santo",
    "alternativaD": "É um subproduto de boas obras constantes",
    "alternativaE": "É herdada de pais e antepassados fiéis",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "De acordo com o estudo de Segunda-feira, qual o significado da palavra 'irrepreensível' em Filipenses 2:15?",
    "alternativaA": "Perfeito em todos os sentidos",
    "alternativaB": "Sem culpa ou sem censura",
    "alternativaC": "Aquele que nunca foi tentado",
    "alternativaD": "Alguém que não comete erros sociais",
    "alternativaE": "Uma pessoa isolada do mundo",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Qual é o significado literal da palavra grega traduzida como 'inofensivos' em Filipenses 2:15?",
    "alternativaA": "Manso como um cordeiro",
    "alternativaB": "Sem armas de guerra",
    "alternativaC": "Não misturado, puro",
    "alternativaD": "Silencioso e discreto",
    "alternativaE": "Amável com os inimigos",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Na Terça-feira, que imagem Paulo utiliza para se referir à possibilidade de sua morte a serviço de Cristo?",
    "alternativaA": "Um grão de trigo que cai na terra",
    "alternativaB": "Uma vela que se apaga",
    "alternativaC": "Ser derramado como libação",
    "alternativaD": "Um soldado que tomba em batalha",
    "alternativaE": "Uma ovelha levada ao matadouro",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Segundo o texto de Terça-feira, as libações na Bíblia hebraica geralmente ocorrem em qual contexto?",
    "alternativaA": "Isoladamente, como um ato único de devoção",
    "alternativaB": "Apenas em cerimônias de coroação de reis",
    "alternativaC": "Acompanhando um sacrifício",
    "alternativaD": "Durante as refeições diárias dos sacerdotes",
    "alternativaE": "No início das viagens missionárias",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "De acordo com a Quarta-feira, qual característica de Timóteo é destacada por ter sido testada por provações?",
    "alternativaA": "Sua eloquência na pregação",
    "alternativaB": "Seu caráter comprovado",
    "alternativaC": "Sua juventude vigorosa",
    "alternativaD": "Sua ascendência judaica",
    "alternativaE": "Sua habilidade como tradutor",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Qual é o significado literal da palavra grega 'isopsichon', usada por Paulo para descrever Timóteo em Filipenses 2:20?",
    "alternativaA": "Amigo de confiança",
    "alternativaB": "Igual em alma",
    "alternativaC": "Irmão de sangue",
    "alternativaD": "Servo fiel",
    "alternativaE": "Companheiro de viagem",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Segundo a Quinta-feira, por que Paulo precisaria do 'manto' deixado em Trôade que ele pediu a Timóteo?",
    "alternativaA": "Para usá-lo como um sinal de autoridade",
    "alternativaB": "Devido ao frio em sua cela de pedra",
    "alternativaC": "Para doá-lo a um prisioneiro necessitado",
    "alternativaD": "Porque era uma vestimenta sagrada",
    "alternativaE": "Para vendê-lo e comprar comida",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "A palavra grega para 'estimar' ou 'honrar' usada para Epafrodito também é aplicada no Novo Testamento para descrever:",
    "alternativaA": "O valor das ofertas das viúvas",
    "alternativaB": "A coroa de glória dos mártires",
    "alternativaC": "Jesus como a 'preciosa' pedra angular",
    "alternativaD": "A sabedoria dos líderes da igreja",
    "alternativaE": "O brilho das estrelas no céu",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Segundo a citação de Ellen White na Sexta-feira, quem será considerado 'o mais próximo de Cristo'?",
    "alternativaA": "Aquele que realizou mais milagres",
    "alternativaB": "Aquele que conheceu mais línguas",
    "alternativaC": "Aquele que bebeu mais profundamente do espírito de Seu amor altruísta",
    "alternativaD": "Aquele que ocupou os cargos mais altos na igreja",
    "alternativaE": "Aquele que sofreu as mortes mais cruéis",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "De acordo com o texto da Sexta-feira (Testemunhos para a Igreja), qual é a relação entre a profundidade da 'noite' e as 'estrelas' para o povo de Deus?",
    "alternativaA": "Quanto mais profunda a noite, mais as estrelas se apagam",
    "alternativaB": "As estrelas só aparecem no início da noite",
    "alternativaC": "Quanto mais profunda a noite, mais brilhantes serão as estrelas",
    "alternativaD": "A noite impede que as estrelas sejam vistas",
    "alternativaE": "As estrelas representam os anjos que afastam a noite",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  }
]

### Buscar próxima pergunta não respondida (requer autenticação)
### Retorna uma pergunta aleatória que o usuário ainda não respondeu
GET {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Cookie: next-auth.session-token={{sessionToken}}

### Listar todas as perguntas de um quiz (requer ADMIN)
### Use o query parameter ?admin=true para listar todas as perguntas ordenadas
GET {{baseUrl}}/api/quiz/{{quizId}}/perguntas?admin=true
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### RESPOSTAS E RESULTADOS
### ============================================

### Salvar resposta de uma pergunta (requer autenticação)
### Retorna a próxima pergunta não respondida ou o resultado final se terminou
POST {{baseUrl}}/api/quiz/resposta
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "quizId": "{{quizId}}",
  "perguntaId": "ID_DA_PERGUNTA_AQUI",
  "alternativaEscolhida": "C"
}

### Salvar resposta sem alternativa (tempo esgotado)
### Se o tempo acabar, pode enviar null ou omitir alternativaEscolhida
POST {{baseUrl}}/api/quiz/resposta
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "quizId": "{{quizId}}",
  "perguntaId": "ID_DA_PERGUNTA_AQUI",
  "alternativaEscolhida": null
}

### Obter resultado do quiz (requer autenticação)
### Retorna total de perguntas, acertos, erros e porcentagem
GET {{baseUrl}}/api/quiz/{{quizId}}/resultado
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### EXEMPLOS DE INSERÇÃO EM MASSA
### ============================================

### Exemplo: Criar quiz completo com múltiplas perguntas
### 1. Primeiro, crie o quiz
POST {{baseUrl}}/api/quiz
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "tema": "Geografia do Brasil"
}

### 2. Copie o ID do quiz retornado e substitua {{quizId}} abaixo
### 3. Crie todas as perguntas de uma vez
POST {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

[
  {
    "enunciado": "Qual é o maior estado do Brasil em área?",
    "alternativaA": "Amazonas",
    "alternativaB": "Pará",
    "alternativaC": "Mato Grosso",
    "alternativaD": "Minas Gerais",
    "alternativaE": "Bahia",
    "respostaCorreta": "A",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Qual é a maior cidade do Brasil em população?",
    "alternativaA": "Rio de Janeiro",
    "alternativaB": "São Paulo",
    "alternativaC": "Brasília",
    "alternativaD": "Salvador",
    "alternativaE": "Fortaleza",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Quantos países fazem fronteira com o Brasil?",
    "alternativaA": "8",
    "alternativaB": "9",
    "alternativaC": "10",
    "alternativaD": "11",
    "alternativaE": "12",
    "respostaCorreta": "C",
    "tempoSegundos": 45
  },
  {
    "enunciado": "Qual é o ponto mais alto do Brasil?",
    "alternativaA": "Pico da Neblina",
    "alternativaB": "Pico da Bandeira",
    "alternativaC": "Pedra da Mina",
    "alternativaD": "Pico do Calçado",
    "alternativaE": "Monte Roraima",
    "respostaCorreta": "A",
    "tempoSegundos": 40
  },
  {
    "enunciado": "Qual é o maior rio do Brasil?",
    "alternativaA": "Rio São Francisco",
    "alternativaB": "Rio Paraná",
    "alternativaC": "Rio Amazonas",
    "alternativaD": "Rio Tocantins",
    "alternativaE": "Rio Madeira",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  }
]

### 4. Ative o quiz para que os usuários possam respondê-lo
PUT {{baseUrl}}/api/quiz/{{quizId}}
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "ativo": true
}

### ============================================
### USANDO A API EM PRODUÇÃO
### ============================================
###
### Para usar as requisições em produção, substitua {{baseUrl}} por {{baseUrlProd}}:
###
### Exemplo de requisição em produção:
### GET {{baseUrlProd}}/api/quiz/ativo
### Cookie: next-auth.session-token={{sessionToken}}
###
### IMPORTANTE: Para obter o sessionToken em produção:
### 1. Acesse sua aplicação em produção (ex: https://seu-projeto.vercel.app)
### 2. Faça login no navegador
### 3. Abra DevTools (F12) > Application > Cookies
### 4. Copie o valor de "next-auth.session-token" (ou "__Secure-next-auth.session-token")
### 5. Cole no @sessionToken acima

### ============================================
### NOTAS IMPORTANTES
### ============================================
###
### 1. AUTENTICAÇÃO:
###    - A maioria das rotas requer autenticação via cookie de sessão
###    - Para obter o token: faça login no navegador, abra DevTools > Application > Cookies
###    - Copie o valor de "next-auth.session-token" (ou "__Secure-next-auth.session-token" em HTTPS)
###    - Cole no header Cookie: next-auth.session-token=SEU_TOKEN
###
### 2. PERMISSÕES:
###    - Rotas de criação/edição/deleção de quiz: requerem role ADMIN
###    - Rotas de criação de perguntas: requerem role ADMIN
###    - Rotas de resposta: qualquer usuário autenticado
###
### 3. VALIDAÇÕES:
###    - Enunciado: obrigatório, não pode ser vazio
###    - Alternativas: todas as 5 (A, B, C, D, E) são obrigatórias
###    - Resposta correta: deve ser "A", "B", "C", "D" ou "E"
###    - Tempo em segundos: deve ser maior que 0
###
### 4. TRANSACTION:
###    - Ao criar múltiplas perguntas, todas são criadas em uma transação
###    - Se qualquer pergunta for inválida, nenhuma será criada (rollback completo)
###
### 5. QUIZ ATIVO:
###    - Apenas um quiz pode estar ativo por vez
###    - Ao ativar um quiz, todos os outros são desativados automaticamente
###
### 6. RESPOSTAS:
###    - Cada usuário só pode responder cada pergunta uma vez
###    - Se o tempo acabar, pode enviar alternativaEscolhida como null
###    - Após responder, retorna próxima pergunta ou resultado final

