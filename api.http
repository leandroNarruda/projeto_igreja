### Variáveis de Ambiente
### Configure estas variáveis antes de usar as requisições
### Para obter o sessionToken: faça login no navegador, abra DevTools > Application > Cookies > copie o valor de "next-auth.session-token"

@baseUrl = http://localhost:3000
@sessionToken = eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0..tsEfOv0WWC7mRZ-a.ZW5e3Sef-zGw1HXLvijsZzQha-hWLR3vuC9w59cJB7gEXRbNJvdI1Tg1xQ0cYzv49Lp0pib7x1I0r-ATSPKr78E_IyFQmqYGzn8LigO_jO5X67-UWjhwbQhDn8CyoRXLGkPr7VyHRRC6P31zvztvJDKZNR_JuRMfM0FoxK3o-tC8kyiAMXSBsh2X2AVo42LumQBnhzS5QLwIr1r1k9NH167Tn3HrhEEHbEJ1j2-u6TcTZPMzkFFHzC-IUS2_mYC4ukS1sBopixJOywxgXF7U093bRRDS_SxTbM7qRmiQaw.bAi0KLUIlvN4S5CD4zgyLg
@quizId = 1
@userId = 1

### ============================================
### AUTENTICAÇÃO
### ============================================

### Criar novo usuário (não requer autenticação)
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "name": "João Silva",
  "email": "joao@example.com",
  "password": "senha123"
}

### ============================================
### QUIZ - CRUD
### ============================================

### Criar novo quiz (requer ADMIN)
POST {{baseUrl}}/api/quiz
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "tema": "História do Brasil"
}

### Listar todos os quizzes (requer ADMIN)
GET {{baseUrl}}/api/quiz
Cookie: next-auth.session-token={{sessionToken}}

### Atualizar quiz (requer ADMIN)
### Pode atualizar tema e/ou status ativo
### Se ativar um quiz, todos os outros serão desativados automaticamente
PUT {{baseUrl}}/api/quiz/{{quizId}}
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "tema": "História do Brasil - Atualizado",
  "ativo": true
}

### Deletar quiz (requer ADMIN)
DELETE {{baseUrl}}/api/quiz/{{quizId}}
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### QUIZ ATIVO
### ============================================

### Buscar quiz ativo (requer autenticação)
### Retorna o quiz ativo, se o usuário já respondeu e o resultado (se já respondeu tudo)
GET {{baseUrl}}/api/quiz/ativo
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### PERGUNTAS
### ============================================

### Criar uma única pergunta (requer ADMIN)
POST {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "enunciado": "Qual é a capital do Brasil?",
  "alternativaA": "São Paulo",
  "alternativaB": "Rio de Janeiro",
  "alternativaC": "Brasília",
  "alternativaD": "Belo Horizonte",
  "alternativaE": "Salvador",
  "respostaCorreta": "C",
  "tempoSegundos": 30
}

### Criar múltiplas perguntas de uma vez (requer ADMIN)
### Envie um array de perguntas - todas serão criadas em uma transação
### Se qualquer pergunta for inválida, nenhuma será criada (rollback)
POST {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

[
  {
    "enunciado": "De acordo com o texto de Sábado, o que Paulo e Silas faziam à meia-noite enquanto estavam presos em Filipos?",
    "alternativaA": "Planejavam uma fuga estratégica",
    "alternativaB": "Oravam e cantavam louvores a Deus",
    "alternativaC": "Escreviam cartas para a igreja de Roma",
    "alternativaD": "Pregavam silenciosamente para o carcereiro",
    "alternativaE": "Dormiam profundamente apesar do tronco",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "No relato do pastor adventista preso (Sábado), quais atividades ele realizou na cela ao ser identificado como pastor?",
    "alternativaA": "Apenas orações individuais e jejuns",
    "alternativaB": "Escrita de livros e alfabetização de presos",
    "alternativaC": "Pregação, distribuição de literatura, batismos e Ceia do Senhor",
    "alternativaD": "Debates teológicos com os guardas romanos",
    "alternativaE": "Organização de um coral e aulas de grego",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Segundo o estudo de Domingo, em que período aproximado a maioria dos estudiosos acredita que as 'Cartas da Prisão' foram escritas?",
    "alternativaA": "Entre 45 a 50 d.C.",
    "alternativaB": "Por volta dos anos 60 a 62 d.C.",
    "alternativaC": "Exatamente no ano 70 d.C.",
    "alternativaD": "Entre 33 a 35 d.C.",
    "alternativaE": "No final do primeiro século, em 95 d.C.",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Ao mencionar a 'guarda pretoriana' em Filipenses 1:13, a que Paulo estava se referindo especificamente em Roma?",
    "alternativaA": "A um local físico de julgamento",
    "alternativaB": "À residência oficial de Pôncio Pilatos",
    "alternativaC": "A um grupo de soldados de elite (cerca de 14 mil pessoas)",
    "alternativaD": "Aos muros que cercavam a cidade de Cesareia",
    "alternativaE": "Ao conselho de anciãos judeus em Roma",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Na lição de Segunda-feira, a quem Paulo estava acorrentado durante sua prisão domiciliar em Roma?",
    "alternativaA": "A Lucas, o médico amado",
    "alternativaB": "A um prisioneiro comum de guerra",
    "alternativaC": "A um soldado romano de elite",
    "alternativaD": "A Epafrodito e Timóteo",
    "alternativaE": "Ao seu assistente literário",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Qual líder cristão do 2º século descreveu os soldados que guardavam os prisioneiros como 'feras selvagens'?",
    "alternativaA": "Policarpo de Esmirna",
    "alternativaB": "Inácio de Antioquia",
    "alternativaC": "Clemente de Roma",
    "alternativaD": "Justino o Mártir",
    "alternativaE": "Tertuliano de Cartago",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "De acordo com o texto de Terça-feira, qual era a ocupação de Lídia, a primeira convertida em Filipos?",
    "alternativaA": "Fabricante de tendas",
    "alternativaB": "Vendedora de púrpura",
    "alternativaC": "Carcereira do império",
    "alternativaD": "Serva na casa de César",
    "alternativaE": "Escrava liberta",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "O que significava para a cidade de Filipos possuir o status de 'Ius Italicum'?",
    "alternativaA": "A proibição do uso da língua grega",
    "alternativaB": "A obrigação de pagar impostos dobrados a Roma",
    "alternativaC": "Mesmos direitos de quem nascia na Itália e isenção de impostos pessoais",
    "alternativaD": "O direito de eleger o próprio imperador",
    "alternativaE": "A exclusividade no comércio de seda no Oriente",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Segundo o estudo de Quarta-feira, quem foi o morador local responsável por levar o evangelho a Colossos?",
    "alternativaA": "Onésimo",
    "alternativaB": "Filemom",
    "alternativaC": "Epafras",
    "alternativaD": "Timóteo",
    "alternativaE": "Tíquico",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Com base nos achados mencionados no texto, qual era a população judaica estimada na região da Frígia (onde ficava Colossos)?",
    "alternativaA": "Cerca de mil judeus",
    "alternativaB": "Aproximadamente cinco mil judeus",
    "alternativaC": "Cerca de dez mil judeus",
    "alternativaD": "Mais de cinquenta mil judeus",
    "alternativaE": "Menos de cem judeus",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Na lição de Quinta-feira, o que Paulo quer dizer ao chamar os cristãos de 'santos'?",
    "alternativaA": "Pessoas que já morreram e foram canonizadas",
    "alternativaB": "Pessoas que nunca cometeram pecados",
    "alternativaC": "Indivíduos separados pelo batismo para ser o povo especial de Deus",
    "alternativaD": "Líderes que alcançaram a perfeição absoluta",
    "alternativaE": "Membros que pertenciam apenas à igreja de Jerusalém",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Quem escreveu na 'Review and Herald' em 1853 que a ordem divina do Novo Testamento é suficiente para organizar a igreja?",
    "alternativaA": "Ellen G. White",
    "alternativaB": "Tiago White",
    "alternativaC": "J. N. Andrews",
    "alternativaD": "Joseph Bates",
    "alternativaE": "Guilherme Miller",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "No texto de Sexta-feira, como é medida a verdadeira e elevada natureza da missão e o valor da vida de uma pessoa?",
    "alternativaA": "Pela quantidade de pessoas convertidas",
    "alternativaB": "Pelo número de livros escritos na prisão",
    "alternativaC": "Pela vida que foi entregue para salvá-lo (Cristo)",
    "alternativaD": "Pela ausência de sofrimento e perseguição",
    "alternativaE": "Pela posição de liderança ocupada na igreja",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Conforme o resumo da semana, qual é o fundamento da alegria de Paulo mesmo em circunstâncias terríveis?",
    "alternativaA": "A expectativa de ser solto em breve",
    "alternativaB": "O apoio financeiro recebido de Lídia",
    "alternativaC": "Estar 'no Senhor' e focar na cruz de Cristo",
    "alternativaD": "A derrota política do império romano",
    "alternativaE": "O fato de não estar sozinho na cela",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  }
]

### Buscar próxima pergunta não respondida (requer autenticação)
### Retorna uma pergunta aleatória que o usuário ainda não respondeu
GET {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Cookie: next-auth.session-token={{sessionToken}}

### Listar todas as perguntas de um quiz (requer ADMIN)
### Use o query parameter ?admin=true para listar todas as perguntas ordenadas
GET {{baseUrl}}/api/quiz/{{quizId}}/perguntas?admin=true
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### RESPOSTAS E RESULTADOS
### ============================================

### Salvar resposta de uma pergunta (requer autenticação)
### Retorna a próxima pergunta não respondida ou o resultado final se terminou
POST {{baseUrl}}/api/quiz/resposta
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "quizId": "{{quizId}}",
  "perguntaId": "ID_DA_PERGUNTA_AQUI",
  "alternativaEscolhida": "C"
}

### Salvar resposta sem alternativa (tempo esgotado)
### Se o tempo acabar, pode enviar null ou omitir alternativaEscolhida
POST {{baseUrl}}/api/quiz/resposta
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "quizId": "{{quizId}}",
  "perguntaId": "ID_DA_PERGUNTA_AQUI",
  "alternativaEscolhida": null
}

### Obter resultado do quiz (requer autenticação)
### Retorna total de perguntas, acertos, erros e porcentagem
GET {{baseUrl}}/api/quiz/{{quizId}}/resultado
Cookie: next-auth.session-token={{sessionToken}}

### ============================================
### EXEMPLOS DE INSERÇÃO EM MASSA
### ============================================

### Exemplo: Criar quiz completo com múltiplas perguntas
### 1. Primeiro, crie o quiz
POST {{baseUrl}}/api/quiz
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "tema": "Geografia do Brasil"
}

### 2. Copie o ID do quiz retornado e substitua {{quizId}} abaixo
### 3. Crie todas as perguntas de uma vez
POST {{baseUrl}}/api/quiz/{{quizId}}/perguntas
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

[
  {
    "enunciado": "Qual é o maior estado do Brasil em área?",
    "alternativaA": "Amazonas",
    "alternativaB": "Pará",
    "alternativaC": "Mato Grosso",
    "alternativaD": "Minas Gerais",
    "alternativaE": "Bahia",
    "respostaCorreta": "A",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Qual é a maior cidade do Brasil em população?",
    "alternativaA": "Rio de Janeiro",
    "alternativaB": "São Paulo",
    "alternativaC": "Brasília",
    "alternativaD": "Salvador",
    "alternativaE": "Fortaleza",
    "respostaCorreta": "B",
    "tempoSegundos": 30
  },
  {
    "enunciado": "Quantos países fazem fronteira com o Brasil?",
    "alternativaA": "8",
    "alternativaB": "9",
    "alternativaC": "10",
    "alternativaD": "11",
    "alternativaE": "12",
    "respostaCorreta": "C",
    "tempoSegundos": 45
  },
  {
    "enunciado": "Qual é o ponto mais alto do Brasil?",
    "alternativaA": "Pico da Neblina",
    "alternativaB": "Pico da Bandeira",
    "alternativaC": "Pedra da Mina",
    "alternativaD": "Pico do Calçado",
    "alternativaE": "Monte Roraima",
    "respostaCorreta": "A",
    "tempoSegundos": 40
  },
  {
    "enunciado": "Qual é o maior rio do Brasil?",
    "alternativaA": "Rio São Francisco",
    "alternativaB": "Rio Paraná",
    "alternativaC": "Rio Amazonas",
    "alternativaD": "Rio Tocantins",
    "alternativaE": "Rio Madeira",
    "respostaCorreta": "C",
    "tempoSegundos": 30
  }
]

### 4. Ative o quiz para que os usuários possam respondê-lo
PUT {{baseUrl}}/api/quiz/{{quizId}}
Content-Type: application/json
Cookie: next-auth.session-token={{sessionToken}}

{
  "ativo": true
}

### ============================================
### NOTAS IMPORTANTES
### ============================================
###
### 1. AUTENTICAÇÃO:
###    - A maioria das rotas requer autenticação via cookie de sessão
###    - Para obter o token: faça login no navegador, abra DevTools > Application > Cookies
###    - Copie o valor de "next-auth.session-token" (ou "__Secure-next-auth.session-token" em HTTPS)
###    - Cole no header Cookie: next-auth.session-token=SEU_TOKEN
###
### 2. PERMISSÕES:
###    - Rotas de criação/edição/deleção de quiz: requerem role ADMIN
###    - Rotas de criação de perguntas: requerem role ADMIN
###    - Rotas de resposta: qualquer usuário autenticado
###
### 3. VALIDAÇÕES:
###    - Enunciado: obrigatório, não pode ser vazio
###    - Alternativas: todas as 5 (A, B, C, D, E) são obrigatórias
###    - Resposta correta: deve ser "A", "B", "C", "D" ou "E"
###    - Tempo em segundos: deve ser maior que 0
###
### 4. TRANSACTION:
###    - Ao criar múltiplas perguntas, todas são criadas em uma transação
###    - Se qualquer pergunta for inválida, nenhuma será criada (rollback completo)
###
### 5. QUIZ ATIVO:
###    - Apenas um quiz pode estar ativo por vez
###    - Ao ativar um quiz, todos os outros são desativados automaticamente
###
### 6. RESPOSTAS:
###    - Cada usuário só pode responder cada pergunta uma vez
###    - Se o tempo acabar, pode enviar alternativaEscolhida como null
###    - Após responder, retorna próxima pergunta ou resultado final

